"use strict";angular.module("app",["ui.router","ngCookies","validation","ngAnimate"]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("main",{url:"/main",templateUrl:"view/main.html",controller:"mainCtrl"}).state("position",{url:"/position/:id",templateUrl:"view/position.html",controller:"positionCtrl"}),e.otherwise("main")}]),angular.module("app").controller("mainCtrl",["$http","$scope",function(t,e){t.get("/data/positionList.json").success(function(t){e.list=t,console.log(t)}).error(function(t){console.log(t)})}]),angular.module("app").controller("positionCtrl",["$log","$q","$http","$state","$scope",function(t,e,o,i,n){function a(t){o.get("data/company.json?id="+t).success(function(t){n.company=t})}n.message=n.isLogin?"投个简历":"去登陆",t.log("第二个页面"),function(){var t=e.defer();return o.get("data/position.json",{params:{id:i.params.id}}).success(function(e){n.position=e,e.posted&&(n.message="已投递"),t.resolve(e)}).error(function(e){t.eject(e)}),t.promise}().then(function(t){a(t.companyId)}),n.go=function(){"已投递"!==n.message&&(n.isLogin?o.post("data/handle.json",{id:n.position.id}).success(function(e){t.info(e),n.message="已投递"}):i.go("login"))}}]),angular.module("app").directive("appCompany",[function(){return{restrict:"A",replace:!0,scope:{com:"="},templateUrl:"view/template/company.html"}}]),angular.module("app").directive("appFoot",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/foot.html"}}]),angular.module("app").directive("appHead",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/head.html"}}]),angular.module("app").directive("appHeadBar",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/headBar.html",scope:{text:"@"},link:function(t){t.back=function(){window.history.back()}}}}]),angular.module("app").directive("appPositionInfo",["$http",function(t){return{restrict:"A",replace:!0,templageUrl:"view/template/positionInfo.html",scope:{isActive:"=",isLogin:"=",pos:"="},link:function(e){e.$watch("pos",function(t){t&&(e.pos.select=e.pos.select||!1,e.imagePath=e.pos.select?"image/star-active.png":"image/star.png")}),e.favorite=function(){t.post("data/favorite.json",{id:e.pos.id,select:!e.pos.select}).success(function(t){e.pos.select=!e.pos.select,e.imagePath=e.pos.select?"image/star-active.png":"image/star.png"})}}}}]),angular.module("app").directive("appPositionList",["$http",function(t){return{restrict:"A",replace:!0,templateUrl:"view/template/positionList.html",scope:{data:"=",filterObj:"="}}}]);